package {
	import flash.display.Sprite;
	import flash.display.Stage;
	import flash.display.StageAlign;
	import flash.display.StageScaleMode;
	
	import phantom.core.handlers.Handler;
	import phantom.core.managers.AssetManager;
	import phantom.core.managers.LoaderManager;
	import phantom.core.managers.LogManager;
	import phantom.core.managers.TimerManager;
	
	/**全局引用入口*/
	public class AppCenter {
		/**全局stage引用*/
		public static var stage:Stage;
		private static var _instance:AppCenter;
		
		/**
		 * 服务类的管理器的实例
		 */        
		public static function get instance() : AppCenter
		{
			if (_instance == null)
			{
				_instance = new AppCenter ();    
			}
			return _instance;
		}
		public function init(main:Sprite):void {
			stage = main.stage;
			stage.frameRate = GlobalConfig.GAME_FPS;
			stage.scaleMode = StageScaleMode.NO_SCALE;
			stage.align = StageAlign.TOP_LEFT;
			stage.stageFocusRect = false;
			stage.tabChildren = false;
			
			//覆盖配置
			var gameVars:Object = stage.loaderInfo.parameters;
			if (gameVars != null) {
				for (var s:String in gameVars) {
					if (GlobalConfig[s] != null) {
						GlobalConfig[s] = gameVars[s];
					}
				}
			}
			
//			stage.addChild(dialog);
//			stage.addChild(tip);
			stage.addChild(log);
		}
		
		/**获得资源路径(此处可以加上资源版本控制)*/
		public static function getResPath(url:String):String {
			return /^http:\/\//g.test(url) ? url : GlobalConfig.resPath + url;
		}
	}
}